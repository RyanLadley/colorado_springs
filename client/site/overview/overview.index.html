<div class = "page-title">
    <h1 >Overview</h1>
</div>

<div class = "table-header overview-table-header">
    <h2>Accounts Overview</h2>
    <div class = "header-clickable">
        <i class="fa fa-compress" aria-hidden="true" ng-click = "collapseAll()"></i>
        <i class="fa fa-expand" aria-hidden="true"  ng-click = "expandAll()"></i>

    </div>
    <table id = "overview-table" class = "table">
        <tr>
            <th>Account</th>
            <th>Description</th>
            <th>2017 Budget</th>
            <th>Misc Transfer</th>
            <th>Total Budget</th>
            <th>Expedetures to Date</th>
            <th>Remaining Balance</th>
        </tr>
        <tr ng-repeat-start = "account in accounts" ng-click = "account.showSubaccount = !account.showSubaccount" class = "account-row account-{{acount.accountNo}}">
            <td class = "account"> <a href = "/overview/account/{{account.account_id}}" >{{account.account_no}}</a></td>
            <td class = "description"> {{account.description}}</td>
            <td class = "currency"> {{account.annual_budget | currency}}</td>
            <td class = "currency"> {{account.transfer | currency}}</td>
            <td class = "currency"> {{account.total_budget | currency}}</td>
            <td class = "currency"> {{account.expendetures | currency}}</td>
            <td class = "currency"> {{account.remaining | currency}}</td>
        </tr>
        <tr ng-repeat-start = "sub_account in account.sub_accounts" class = "subaccount-row account-{{subacount.accountNo}}"
            ng-show = "account.showSubaccount" ng-click = "sub_account.showSubaccount = !sub_account.showSubaccount">
            <td class = "account sub-account"> <a href = "/overview/account/{{sub_account.account_id}}" >{{sub_account.account_no}}-{{sub_account.sub_no}}</a></td>
            <td class = "description"> {{sub_account.description}}</td>
            <td class = "currency"> {{sub_account.annual_budget | currency}}</td>
            <td class = "currency"> {{sub_account.transfer | currency}}</td>
            <td class = "currency"> {{sub_account.total_budget | currency}}</td>
            <td class = "currency"> {{sub_account.expendetures | currency}}</td>
            <td class = "currency"> {{sub_account.remaining | currency}}</td>
        </tr>
        <tr ng-repeat-start = "shred_out in sub_account.sub_accounts" class = "sub-row account-{{sub.accountNo}}"
            ng-show = "sub_account.showSubaccount && account.showSubaccount">
            <td class = "account sub"> <a href = "/overview/account/{{shred_out.account_id}}" >{{shred_out.account_no}}-{{sub_account.sub_no}}-{{shred_out.shred_no}}</a></td>
            <td class = "description"> {{shred_out.description}}</td>
            <td class = "currency"> {{shred_out.annual_budget | currency}}</td>
            <td class = "currency"> {{shred_out.transfer | currency}}</td>
            <td class = "currency"> {{shred_out.total_budget | currency}}</td>
            <td class = "currency"> {{shred_out.expendetures | currency}}</td>
            <td class = "currency"> {{shred_out.remaining | currency}}</td>
        </tr>
        <tr ng-repeat-end ng-hide="true"></tr> <!--Ends Shred Out Loop -->
        <tr ng-repeat-end ng-hide="true"></tr> <!--Ends Sub Account Loop -->
        <tr ng-repeat-end ng-hide="true"></tr> <!--Ends Account Loop -->
    </table>
</div>

<div class = "refrence-area area" >
    <h2 class = "title"> Quick Refrence </h2>
    <div class = "section-area">
        <h3 class = "section-title">Accounts</h3>
        <div class ="section-inset">
            <div ng-repeat = "account in accounts track by $index" >
                <a class = "account-refrence" href = "/overview/account/1" title = "{{account.description}}">{{account.account_no}}</a>
                <div ng-repeat = "sub_account in account.sub_accounts track by $index" >
                    <a class = "account-refrence" href = "/overview/account/1" title = "{{sub_account.description}}">{{sub_account.account_no}}-{{sub_account.sub_no}}</a>
                    <div ng-repeat = "shred_out in sub_account.sub_accounts  track by $index" >
                        <a class = "account-refrence" href = "/overview/account/1" title = "{{shred_out.description}}">{{shred_out.account_no}}-{{sub_account.sub_no}}-{{shred_out.shred_no}} </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>